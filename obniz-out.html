<script type="text/javascript">


  RED.nodes.registerType('obniz-out', {
    category: 'advanced',
    color: '#00afd5',
    defaults: {
      obniz: {value: "", type:"obniz"},
      name: {value: ""},
      code: {value: ""}
    },
    inputs: 1,
    outputs: 0,
    icon: "arrow-in.png",
    align: "right",
    label: function () {
      return (this.name || "obniz out") ;
    },
    oneditprepare: function () {
      this.editor = RED.editor.createEditor({
        id: 'node-input-code-editor',
        mode: 'ace/mode/javascript',
        value: this.code
      });
    },
    oneditsave: function () {
      this.code = this.editor.getValue();
      this.editor.destroy();
      delete this.editor;
    },
    oneditcancel: function () {
      this.editor.destroy();
      delete this.editor;
    },
  });

</script>


<script type="text/x-red" data-template-name="obniz-out">

    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>

    <div class="form-row">
        <label for="node-input-obniz"><i class="fa fa-tag"></i> obniz</label>
        <input type="text" id="node-input-obniz" placeholder="obniz">
    </div>

    <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-code-editor"></div>

</script>

<script type="text/x-red" data-help-name="obniz-out">
    <p>obnizにデータを送る</p>
</script>

